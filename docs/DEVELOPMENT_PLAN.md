# –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞ Modern UART Control

## 1. –í–≤–µ–¥–µ–Ω–∏–µ

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–ª–∞–Ω –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞ Modern UART Control, –≤–∫–ª—é—á–∞—é—â–∏–π –ø—è—Ç—å –∫–ª—é—á–µ–≤—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚úÖ **–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è unit-—Ç–µ—Å—Ç–∞–º–∏** ‚Äî –í–´–ü–û–õ–ù–ï–ù–û
- ‚è≥ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è (CI/CD)
- ‚úÖ **–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** ‚Äî –í–´–ü–û–õ–ù–ï–ù–û
- ‚úÖ **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è** ‚Äî –í–´–ü–û–õ–ù–ï–ù–û
- ‚úÖ **–í–Ω–µ–¥—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** ‚Äî –í–´–ü–û–õ–ù–ï–ù–û

---

**–°–≤–æ–¥–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
| –†–∞–∑–¥–µ–ª | –°—Ç–∞—Ç—É—Å |
|--------|--------|
| Unit-—Ç–µ—Å—Ç—ã | ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ |
| CI/CD | ‚è≥ –û–∂–∏–¥–∞–µ—Ç |
| –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚è≥ –û–∂–∏–¥–∞–µ—Ç |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ |
| –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ | ‚è≥ –û–∂–∏–¥–∞–µ—Ç |

---

## 2. –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### 2.1 –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–§–∞–π–ª—ã —Ç–µ—Å—Ç–æ–≤:**
- `tests/test_main_viewmodel.py` ‚Äî –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –ª–æ–≥–∏–∫–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ ‚úÖ
- `tests/test_viewmodel_serialworker.py` ‚Äî —Ç–µ—Å—Ç—ã —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä–æ–≤ –∏ –±–∞–∑–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ ‚úÖ
- `tests/models/test_serial_worker.py` ‚Äî —Ç–µ—Å—Ç—ã SerialWorker ‚úÖ
- `tests/models/test_config_loader.py` ‚Äî —Ç–µ—Å—Ç—ã ConfigLoader ‚úÖ
- `tests/viewmodels/test_main_viewmodel.py` ‚Äî –ø–æ–ª–Ω—ã–µ —Ç–µ—Å—Ç—ã MainViewModel ‚úÖ
- `tests/viewmodels/test_com_port_viewmodel.py` ‚Äî —Ç–µ—Å—Ç—ã ComPortViewModel ‚úÖ
- `tests/viewmodels/test_command_history_viewmodel.py` ‚Äî —Ç–µ—Å—Ç—ã CommandHistoryViewModel ‚úÖ
- `tests/utils/test_port_manager.py` ‚Äî —Ç–µ—Å—Ç—ã PortManager ‚úÖ
- `tests/utils/test_theme_manager.py` ‚Äî —Ç–µ—Å—Ç—ã ThemeManager ‚úÖ
- `tests/utils/test_state_utils.py` ‚Äî —Ç–µ—Å—Ç—ã StateUtils ‚úÖ
- `tests/conftest.py` ‚Äî —Ñ–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è Qt —Ç–µ—Å—Ç–æ–≤ ‚úÖ
- `pytest.ini` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest ‚úÖ

**–¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:**
- –¢–µ—Å—Ç–∏—Ä—É—é—Ç—Å—è –±–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: `format_rx`, `format_tx`, `format_system` ‚úÖ
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –ª–æ–≥–∏–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ ‚úÖ
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ SerialWorker ‚úÖ
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è ConfigLoader (—Ü–≤–µ—Ç–∞, —à—Ä–∏—Ñ—Ç—ã, —Ä–∞–∑–º–µ—Ä—ã, serial config) ‚úÖ
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è PortManager ‚úÖ
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è ThemeManager ‚úÖ
- –¢–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è StateUtils ‚úÖ

**–°—Ç–∞—Ç—É—Å: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û**

### 2.2 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

**Model —Å–ª–æ–π:**
- `src/models/serial_worker.py` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å SerialWorker (QThread)
- `src/models/base_model.py` ‚Äî –±–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å
- `src/models/com_port_model.py` ‚Äî –º–æ–¥–µ–ª—å COM-–ø–æ—Ä—Ç–∞

**ViewModel —Å–ª–æ–π:**
- `src/viewmodels/main_viewmodel.py` ‚Äî MainViewModel –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–æ–≥–∞–º–∏
- `src/viewmodels/com_port_viewmodel.py` ‚Äî ComPortViewModel –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ä—Ç–æ–º
- `src/viewmodels/command_history_viewmodel.py` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π –∫–æ–º–∞–Ω–¥

**Utils:**
- `src/utils/config_loader.py` ‚Äî –∑–∞–≥—Ä—É–∑—á–∏–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `src/utils/port_manager.py` ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä –ø–æ—Ä—Ç–æ–≤
- `src/utils/theme_manager.py` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–∞–º–∏
- `src/utils/state_utils.py` ‚Äî —É—Ç–∏–ª–∏—Ç—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π

---

## 3. –í–Ω–µ–¥—Ä–µ–Ω–∏–µ Unit-–¢–µ—Å—Ç–æ–≤

### 3.1 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Model –°–ª–æ—è

#### SerialWorker (src/models/serial_worker.py)

**–ü—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- `configure(port_name, baud_rate)` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä—Ç–∞
- `write(data)` ‚Äî –∑–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö –≤ –æ—á–µ—Ä–µ–¥—å
- `stop()` ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ worker
- `is_connected()` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- `get_port_name()` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –ø–æ—Ä—Ç–∞
- `get_baud_rate()` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏

**–ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏:**
- –ó–∞–ø–∏—Å—å –ø—Ä–∏ –æ—Ç–∫–ª—é—á—ë–Ω–Ω–æ–º –ø–æ—Ä—Ç–µ
- –í—ã–∑–æ–≤ stop() –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
- –ü—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏

**–¢—Ä–µ–±—É–µ–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```python
pytest>=7.0.0
pytest-qt>=4.0.0
pytest-mock>=3.10.0
```

#### ConfigLoader (src/utils/config_loader.py)

**–ü—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- `get_colors(theme)` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤ —Ç–µ–º—ã
- `get_button_colors(theme)` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤ –∫–Ω–æ–ø–æ–∫
- `get_font_config()` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —à—Ä–∏—Ñ—Ç–æ–≤
- `get_size_config()` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤
- `get_serial_config()` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ serial –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `get_window_title()` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –æ–∫–Ω–∞

**–ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏:**
- –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ç–µ–º–∞
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∫–æ–Ω—Ñ–∏–≥–µ
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –≤ –∫–æ–Ω—Ñ–∏–≥–µ

### 3.2 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ViewModel –°–ª–æ—è

#### MainViewModel (src/viewmodels/main_viewmodel.py)

**–ü—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- `format_rx(source, text)` ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ RX —Å–æ–æ–±—â–µ–Ω–∏–π
- `format_tx(source, text)` ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ TX —Å–æ–æ–±—â–µ–Ω–∏–π
- `format_system(source, text)` ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- `set_display_options(show_time, show_source)` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `cache_log_line(source, html, plain)` ‚Äî –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏
- `filter_cache(source, query)` ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫—ç—à–∞
- `clear_cache()` ‚Äî –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
- `strip_html(html)` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ HTML —Ç–µ–≥–æ–≤

**–ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏:**
- –ü—É—Å—Ç—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –°–æ–æ–±—â–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏
- –û—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (>10000 —Å–∏–º–≤–æ–ª–æ–≤)
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã HTML (<, >, &)
- –ü—É—Å—Ç–æ–π –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å

#### ComPortViewModel (src/viewmodels/com_port_viewmodel.py)

**–ü—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- `connect(port_name)` ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ø–æ—Ä—Ç—É
- `disconnect()` ‚Äî –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç –ø–æ—Ä—Ç–∞
- `send_command(command)` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥—ã
- `refresh_ports()` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ—Ä—Ç–æ–≤
- `get_state()` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `get_rx_count()` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞ RX
- `get_tx_count()` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞ TX

**–ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏:**
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –ø–æ—Ä—Ç—É
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —É–∂–µ –∞–∫—Ç–∏–≤–Ω–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–∏ –æ—Ç–∫–ª—é—á—ë–Ω–Ω–æ–º –ø–æ—Ä—Ç–µ
- –ú–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

### 3.3 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ conftest.py              # –û–±—â–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã ‚úÖ
‚îú‚îÄ‚îÄ pytest.ini               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest ‚úÖ
‚îú‚îÄ‚îÄ requirements-test.txt   # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ test_serial_worker.py ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ test_config_loader.py ‚úÖ
‚îú‚îÄ‚îÄ viewmodels/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ test_main_viewmodel.py ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ test_com_port_viewmodel.py ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ test_command_history_viewmodel.py ‚úÖ
‚îî‚îÄ‚îÄ utils/
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ test_port_manager.py ‚úÖ
    ‚îú‚îÄ‚îÄ test_theme_manager.py ‚úÖ
    ‚îî‚îÄ‚îÄ test_state_utils.py ‚úÖ
```

**–°—Ç–∞—Ç—É—Å: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û** ‚Äî –í—Å–µ —Ç–µ—Å—Ç—ã —Å–æ–∑–¥–∞–Ω—ã —Å–æ–≥–ª–∞—Å–Ω–æ –ø–ª–∞–Ω—É

### 3.4 –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤

```python
# tests/models/test_serial_worker.py
import pytest
from unittest.mock import Mock, patch, MagicMock
from src.models.serial_worker import SerialWorker


class TestSerialWorker:
    """Unit tests for SerialWorker model."""
    
    @pytest.fixture
    def worker(self):
        """Create SerialWorker instance."""
        return SerialWorker('CPU1')
    
    def test_configure_sets_port_and_baud(self, worker):
        """Test configure method sets port name and baud rate."""
        worker.configure('COM1', 9600)
        assert worker._port_name == 'COM1'
        assert worker._baud == 9600
    
    def test_write_enqueue_data(self, worker):
        """Test write method adds data to queue."""
        worker.write('TEST')
        item = worker._write_q.get_nowait()
        assert item == 'TEST'
    
    def test_write_empty_string(self, worker):
        """Test writing empty string does not crash."""
        worker.write('')
        # Empty string should still be queued
    
    def test_write_when_disconnected(self, worker):
        """Test write when port is not connected."""
        worker.write('DATA')
        # Data should still be queued for later
    
    def test_stop_multiple_calls(self, worker):
        """Test multiple stop calls don't cause errors."""
        worker.stop()
        worker.stop()  # Should not raise
```

### 3.5 –§–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Qt

```python
# tests/conftest.py
import pytest
import sys
import os

# Add src to path
sys.path.insert(0, os.path.join(os.path.dirname(__file__), '..', 'src'))


@pytest.fixture(scope='session')
def qapp():
    """Create QApplication instance for Qt tests."""
    from PySide6 import QtWidgets
    app = QtWidgets.QApplication.instance()
    if app is None:
        app = QtWidgets.QApplication([])
    yield app
    app.quit()


@pytest.fixture
def mock_serial(monkeypatch):
    """Mock pyserial module."""
    mock = MagicMock()
    mock.Serial = MagicMock()
    mock.SerialException = Exception
    monkeypatch.setitem(sys.modules, 'serial', mock)
    return mock
```

---

## 4. –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ (CI/CD)

**–°—Ç–∞—Ç—É—Å: ‚è≥ –û–ñ–ò–î–ê–ï–¢** ‚Äî –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD –ø–∞–π–ø–ª–∞–π–Ω–æ–≤.

### 4.1 –í—ã–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
- GitHub Actions ‚Äî –¥–ª—è CI/CD (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤)
- GitLab CI ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
- Jenkins ‚Äî –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è

### 4.2 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è GitHub Actions

```yaml
# .github/workflows/ci.yml
name: CI Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  test:
    runs-on: windows-latest
    
    steps:
      - uses: actions/checkout@v4
      
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
          
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
          pip install -r requirements-test.txt
          
      - name: Run pytest
        run: pytest --cov=src --cov-report=xml --cov-report=html
        
      - name: Upload coverage
        uses: codecov/codecov-action@v3
        with:
          files: ./coverage.xml
          flags: unittests
          
  lint:
    runs-on: windows-latest
    
    steps:
      - uses: actions/checkout@v4
      
      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
          
      - name: Run linting
        run: |
          pip install flake8 pylint mypy
          flake8 src --count --select=E9,F63,F7,F82 --show-source --statistics
          pylint src --errors-only
          
  build:
    runs-on: windows-latest
    needs: [test, lint]
    
    steps:
      - uses: actions/checkout@v4
      
      - name: Build executable
        run: |
          pip install pyinstaller
          pyinstaller --onefile --name UART_Control src/main.py
          
      - name: Upload artifact
        uses: actions/upload-artifact@v3
        with:
          name: uart-control-exe
          path: dist/UART_Control.exe
```

### 4.3 –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö —Å–±–æ—Ä–∫–∏

```yaml
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ workflow
- name: Discord Notification
  if: always()
  uses: jakepitman/jepa-discord-notify@v1
  with:
    webhook_url: ${{ secrets.DISCORD_WEBHOOK }}
    status: ${{ job.status }}
    title: "UART Control CI"
    description: "Build ${{ job.result }}"
```

### 4.4 –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤

```txt
# requirements-test.txt
pytest>=7.0.0
pytest-qt>=4.0.0
pytest-mock>=3.10.0
pytest-cov>=4.0.0
pytest-xdist>=3.0.0  # –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
```

---

## 5. –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–°—Ç–∞—Ç—É—Å: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û** ‚Äî –ú–æ–¥—É–ª—å –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω:
- [`src/utils/profiler.py`](src/utils/profiler.py) ‚Äî –º–æ–¥—É–ª—å –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è ‚úÖ
- [`scripts/profile_app.py`](scripts/profile_app.py) ‚Äî —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ —Å –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º ‚úÖ

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- `Profiler` ‚Äî –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞
- `profile_function` ‚Äî –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
- `PerformanceTimer` ‚Äî –ø—Ä–æ—Å—Ç–æ–π —Ç–∞–π–º–µ—Ä –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ `scripts/profile_app.py`

### 5.1 –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è

**Python –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ:**
- `cProfile` ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–æ—Ñ–∞–π–ª–µ—Ä
- `pstats` ‚Äî –∞–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- `timeit` ‚Äî –∏–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–í–Ω–µ—à–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
- `memory_profiler` ‚Äî –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
- `line_profiler` ‚Äî –ø–æ—Å—Ç—Ä–æ—á–Ω–æ–µ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
- `py-spy` ‚Äî –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `scalene` ‚Äî –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫ (CPU, –ø–∞–º—è—Ç—å, GPU)

### 5.2 –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —É—á–∞—Å—Ç–∫–æ–≤

**–°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª—è –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è:**

```python
# src/utils/profiler.py
"""Performance profiling utilities."""

import cProfile
import pstats
import io
import logging
import functools
import os
from typing import Callable, Optional
from pathlib import Path

logger = logging.getLogger(__name__)


class Profiler:
    """Context manager for profiling code sections."""
    
    def __init__(self, name: str, output_dir: Optional[Path] = None):
        self.name = name
        self.output_dir = output_dir or Path('logs/profiles')
        self.profiler = cProfile.Profile()
        
    def __enter__(self):
        self.profiler.enable()
        return self
        
    def __exit__(self, exc_type, exc_val, exc_tb):
        self.profiler.disable()
        self._save_stats()
        
    def _save_stats(self):
        """Save profiling stats to file."""
        self.output_dir.mkdir(parents=True, exist_ok=True)
        stats_file = self.output_dir / f'{self.name}.prof'
        
        # Save as pickle
        self.profiler.dump_stats(str(stats_file))
        
        # Also print summary
        s = io.StringIO()
        ps = pstats.Stats(self.profiler, stream=s)
        ps.sort_stats('cumulative')
        ps.print_stats(20)
        logger.info(f"Profile for {self.name}:\n{s.getvalue()}")


def profile_function(func: Callable) -> Callable:
    """Decorator to profile a function."""
    @functools.wraps(func)
    def wrapper(*args, **kwargs):
        profiler = cProfile.Profile()
        profiler.enable()
        try:
            return func(*args, **kwargs)
        finally:
            profiler.disable()
            s = io.StringIO()
            ps = pstats.Stats(profiler, stream=s)
            ps.sort_stats('cumulative')
            ps.print_stats(10)
            logger.debug(f"Profile for {func.__name__}:\n{s.getvalue()}")
    return wrapper
```

### 5.3 –¢–æ—á–∫–∏ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—á–∞—Å—Ç–∫–∏ –∫–æ–¥–∞ –¥–ª—è –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è:**

1. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö (SerialWorker)**
   - `read()` –º–µ—Ç–æ–¥
   - –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä–æ–∫
   - –≠–º–∏—Å—Å–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤

2. **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π (MainViewModel)**
   - `format_rx()`, `format_tx()`, `format_system()`
   - HTML —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –†–∞–±–æ—Ç–∞ —Å –∫—ç—à–µ–º

3. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫**
   - `filter_cache()` –º–µ—Ç–æ–¥
   - –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è

4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI**
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–æ–≤

### 5.4 –°–∫—Ä–∏–ø—Ç –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è

```python
# scripts/profile_app.py
"""Run application with profiling enabled."""

import sys
import os
sys.path.insert(0, os.path.join(os.path.dirname(__file__), '..', 'src'))

from PySide6 import QtWidgets
from src.main import MainWindow
import cProfile
import pstats
from io import StringIO


def main():
    app = QtWidgets.QApplication(sys.argv)
    
    # Enable profiling
    profiler = cProfile.Profile()
    profiler.enable()
    
    window = MainWindow()
    window.show()
    
    result = app.exec()
    
    profiler.disable()
    
    # Print stats
    s = StringIO()
    ps = pstats.Stats(profiler, stream=s)
    ps.sort_stats('cumulative')
    ps.print_stats(30)
    
    print("=== Top 30 Functions by Cumulative Time ===")
    print(s.getvalue())
    
    # Save to file
    profiler.dump_stats('logs/profile_output.prof')
    print("\nProfile saved to logs/profile_output.prof")
    print("View with: python -m pstats logs/profile_output.prof")
    
    sys.exit(result)


if __name__ == '__main__':
    main()
```

### 5.5 –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

```python
# src/utils/timing.py
"""Timing utilities for performance measurement."""

import time
import logging
from functools import wraps
from typing import Callable

logger = logging.getLogger(__name__)


class Timer:
    """Context manager for timing code blocks."""
    
    def __init__(self, name: str = "Operation"):
        self.name = name
        self.start_time = None
        self.elapsed = None
        
    def __enter__(self):
        self.start_time = time.perf_counter()
        return self
        
    def __exit__(self, exc_type, exc_val, exc_tb):
        self.elapsed = time.perf_counter() - self.start_time
        logger.info(f"{self.name} took {self.elapsed*1000:.2f}ms")


def timed(func: Callable) -> Callable:
    """Decorator to time function execution."""
    @wraps(func)
    def wrapper(*args, **kwargs):
        start = time.perf_counter()
        result = func(*args, **kwargs)
        elapsed = time.perf_counter() - start
        logger.debug(f"{func.__name__} took {elapsed*1000:.2f}ms")
        return result
    return wrapper
```

---

## 6. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –°–∏—Å—Ç–µ–º—ã –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–°—Ç–∞—Ç—É—Å: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û** ‚Äî –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞:
- [`src/utils/logger.py`](src/utils/logger.py) ‚Äî –º–æ–¥—É–ª—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è ‚úÖ
- [`config/logging_config.json`](config/logging_config.json) ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º ‚úÖ
- [`src/main.py`](src/main.py) ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º ‚úÖ

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –∏ —Ñ–∞–π–ª–æ–≤—ã–π –≤—ã–≤–æ–¥
- –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ (10 MB, 5 —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π)
- –†–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π (development, testing, production, staging)
- –û—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –æ—à–∏–±–æ–∫
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —É—Ä–æ–≤–Ω–∏ –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
- –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤

### 6.1 –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:** ‚úÖ
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `logging` –º–æ–¥—É–ª—å Python
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª–µ–π –≤–æ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö:
  - `src/models/serial_worker.py` ‚úÖ
  - `src/viewmodels/com_port_viewmodel.py` ‚úÖ
  - `src/viewmodels/command_history_viewmodel.py` ‚úÖ
  - `src/utils/config_loader.py` ‚úÖ
  - `src/utils/theme_manager.py` ‚úÖ
  - `src/main.py` ‚úÖ
- –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º —É—Ä–æ–≤–Ω–µ–º (DEBUG, INFO, WARNING, ERROR)

**–¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ:**
- FileHandler –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª—ã
- –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤
- –†–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π

### 6.2 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```python
# src/utils/logger.py
"""Enhanced logging configuration."""

import logging
import logging.handlers
import os
import sys
from pathlib import Path
from typing import Optional
from datetime import datetime


class LogConfig:
    """Logging configuration class."""
    
    # Log levels per environment
    ENV_LEVELS = {
        'development': logging.DEBUG,
        'testing': logging.DEBUG,
        'production': logging.INFO,
        'staging': logging.WARNING,
    }
    
    # Log format
    FORMAT = '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
    DATE_FORMAT = '%Y-%m-%d %H:%M:%S'
    
    # File settings
    LOG_DIR = Path('logs')
    MAX_BYTES = 10 * 1024 * 1024  # 10 MB
    BACKUP_COUNT = 5


def setup_logging(
    env: str = 'development',
    log_file: Optional[str] = None,
    level: Optional[int] = None
) -> logging.Logger:
    """
    Configure application logging.
    
    Args:
        env: Environment name (development, testing, production, staging)
        log_file: Optional log file name
        level: Optional explicit log level
        
    Returns:
        Configured root logger
    """
    # Determine log level
    if level is None:
        level = LogConfig.ENV_LEVELS.get(env, logging.DEBUG)
    
    # Create logs directory
    LogConfig.LOG_DIR.mkdir(parents=True, exist_ok=True)
    
    # Create formatters
    formatter = logging.Formatter(LogConfig.FORMAT, LogConfig.DATE_FORMAT)
    
    # Root logger
    root_logger = logging.getLogger()
    root_logger.setLevel(level)
    
    # Remove existing handlers
    for handler in root_logger.handlers[:]:
        root_logger.removeHandler(handler)
    
    # Console handler (always enabled)
    console_handler = logging.StreamHandler(sys.stdout)
    console_handler.setLevel(level)
    console_handler.setFormatter(formatter)
    root_logger.addHandler(console_handler)
    
    # File handler with rotation
    if log_file is None:
        timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
        log_file = f'app_{timestamp}.log'
    
    file_path = LogConfig.LOG_DIR / log_file
    
    # Rotating file handler
    rotating_handler = logging.handlers.RotatingFileHandler(
        file_path,
        maxBytes=LogConfig.MAX_BYTES,
        backupCount=LogConfig.BACKUP_COUNT,
        encoding='utf-8'
    )
    rotating_handler.setLevel(level)
    rotating_handler.setFormatter(formatter)
    root_logger.addHandler(rotating_handler)
    
    # Error log file (always ERROR level)
    error_file_path = LogConfig.LOG_DIR / f'errors_{timestamp}.log'
    error_handler = logging.handlers.RotatingFileHandler(
        error_file_path,
        maxBytes=LogConfig.MAX_BYTES,
        backupCount=LogConfig.BACKUP_COUNT,
        encoding='utf-8'
    )
    error_handler.setLevel(logging.ERROR)
    error_handler.setFormatter(formatter)
    root_logger.addHandler(error_handler)
    
    return root_logger


def get_logger(name: str, level: Optional[int] = None) -> logging.Logger:
    """
    Get a logger for a specific module.
    
    Args:
        name: Logger name (typically __name__)
        level: Optional specific level for this logger
        
    Returns:
        Configured logger
    """
    logger = logging.getLogger(name)
    if level is not None:
        logger.setLevel(level)
    return logger
```

### 6.3 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º

```python
# config/logging_config.json
{
    "development": {
        "level": "DEBUG",
        "console": true,
        "file": true,
        "rotation": false,
        "modules": {
            "src.models": "DEBUG",
            "src.viewmodels": "DEBUG",
            "src.utils": "DEBUG"
        }
    },
    "production": {
        "level": "INFO",
        "console": false,
        "file": true,
        "rotation": true,
        "modules": {
            "src.models": "INFO",
            "src.viewmodels": "WARNING",
            "src.utils": "INFO"
        }
    },
    "testing": {
        "level": "DEBUG",
        "console": true,
        "file": false,
        "modules": {
            "src.models": "DEBUG",
            "src.viewmodels": "DEBUG"
        }
    }
}
```

### 6.4 –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```python
# src/utils/logging_config_loader.py
"""Load logging configuration from config file."""

import json
import logging
import logging.config
from pathlib import Path
from typing import Dict, Any


def load_logging_config(env: str = 'development') -> Dict[str, Any]:
    """Load logging configuration for the given environment."""
    config_file = Path('config/logging_config.json')
    
    if config_file.exists():
        with open(config_file, 'r', encoding='utf-8') as f:
            all_configs = json.load(f)
            return all_configs.get(env, {})
    
    return {}


def configure_logging(env: str = 'development'):
    """Configure logging based on environment."""
    config = load_logging_config(env)
    
    level_name = config.get('level', 'DEBUG')
    level = getattr(logging, level_name, logging.DEBUG)
    
    # Use the setup function from logger.py
    from src.utils.logger import setup_logging
    setup_logging(env=env, level=level)
```

### 6.5 –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```python
# Example usage in modules
import logging

logger = logging.getLogger(__name__)


def some_function():
    logger.debug("Debug message")      # Detailed debug info
    logger.info("Info message")         # General information
    logger.warning("Warning message")   # Warning
    logger.error("Error message")       # Error
    logger.critical("Critical message") # Critical
```

---

## 7. –°–∏—Å—Ç–µ–º–∞ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–°—Ç–∞—Ç—É—Å: ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û** ‚Äî –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞:

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ ComPortViewModel:**
- `rx_count` / `tx_count` ‚Äî —Å—á—ë—Ç—á–∏–∫–∏ –ø—Ä–∏–Ω—è—Ç—ã—Ö –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π ‚úÖ
- `error_count` ‚Äî —Å—á—ë—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ (–Ω–æ–≤–æ–µ) ‚úÖ
- `connection_time` ‚Äî –≤—Ä–µ–º—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–Ω–æ–≤–æ–µ) ‚úÖ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å –º–µ—Ç—Ä–∏–∫ –ø—Ä–∏ disconnect ‚úÖ

**–ú–µ—Ç—Ä–∏–∫–∏ —É–∂–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏.**

### 7.1 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. **–°–±–æ—Ä—â–∏–∫ –º–µ—Ç—Ä–∏–∫** ‚Äî —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
2. **–•—Ä–∞–Ω–∏–ª–∏—â–µ –º–µ—Ç—Ä–∏–∫** ‚Äî –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
3. **–î–∞—à–±–æ—Ä–¥** ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫
4. **–°–∏—Å—Ç–µ–º–∞ –∞–ª–µ—Ä—Ç–∏–Ω–≥–∞** ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö

### 7.2 –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫

```python
# src/utils/metrics.py
"""Performance metrics collection."""

import time
import psutil
import logging
from typing import Dict, Any, Optional
from dataclasses import dataclass, field
from datetime import datetime
from collections import deque


@dataclass
class MetricsData:
    """Container for performance metrics."""
    timestamp: datetime
    response_time_ms: float
    throughput: float  # requests per second
    cpu_percent: float
    memory_mb: float
    rx_count: int
    tx_count: int
    error_count: int = 0


class MetricsCollector:
    """Collects and stores performance metrics."""
    
    def __init__(self, max_samples: int = 1000):
        self.max_samples = max_samples
        self._samples: deque = deque(maxlen=max_samples)
        self._request_times: deque = deque(maxlen=100)
        self._request_count = 0
        self._error_count = 0
        self._start_time = time.time()
        
    def record_request(self, duration_ms: float):
        """Record a request and its duration."""
        self._request_times.append(duration_ms)
        self._request_count += 1
        
    def record_error(self):
        """Record an error occurrence."""
        self._error_count += 1
        
    def get_current_metrics(self) -> MetricsData:
        """Get current system metrics."""
        # Calculate average response time
        avg_response_time = (
            sum(self._request_times) / len(self._request_times)
            if self._request_times else 0
        )
        
        # Calculate throughput
        elapsed = time.time() - self._start_time
        throughput = self._request_count / elapsed if elapsed > 0 else 0
        
        # System metrics
        cpu_percent = psutil.cpu_percent(interval=0.1)
        memory = psutil.Process().memory_info()
        memory_mb = memory.rss / (1024 * 1024)
        
        return MetricsData(
            timestamp=datetime.now(),
            response_time_ms=avg_response_time,
            throughput=throughput,
            cpu_percent=cpu_percent,
            memory_mb=memory_mb,
            rx_count=0,  # Will be updated by app
            tx_count=0,
            error_count=self._error_count
        )
    
    def get_all_samples(self) -> list:
        """Get all collected samples."""
        return list(self._samples)
    
    def reset(self):
        """Reset all metrics."""
        self._samples.clear()
        self._request_times.clear()
        self._request_count = 0
        self._error_count = 0
        self._start_time = time.time()


# Global metrics collector
metrics_collector = MetricsCollector()
```

### 7.3 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

```python
# src/utils/metrics_integration.py
"""Integrate metrics collection with application."""

import logging
from typing import Optional

logger = logging.getLogger(__name__)


class MetricsMiddleware:
    """Middleware for collecting application metrics."""
    
    def __init__(self, viewmodel):
        self.viewmodel = viewmodel
        self._rx_count = 0
        self._tx_count = 0
        
    def on_data_received(self, port: str, data: str):
        """Called when data is received."""
        from src.utils.metrics import metrics_collector
        self._rx_count += 1
        # Track metrics
        
    def on_data_sent(self, port: str, data: str):
        """Called when data is sent."""
        from src.utils.metrics import metrics_collector
        self._tx_count += 1
        
    def on_error(self, error: str):
        """Called on error."""
        from src.utils.metrics import metrics_collector
        metrics_collector.record_error()
```

### 7.4 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–ª–µ—Ä—Ç–∏–Ω–≥–∞

```python
# src/utils/alerting.py
"""Alerting system for performance thresholds."""

import logging
from typing import Callable, Dict, Any
from dataclasses import dataclass
from datetime import datetime
from enum import Enum


class AlertLevel(Enum):
    """Alert severity levels."""
    INFO = "info"
    WARNING = "warning"
    ERROR = "error"
    CRITICAL = "critical"


@dataclass
class AlertRule:
    """Alert rule definition."""
    name: str
    metric: str
    threshold: float
    operator: str  # "gt", "lt", "eq", "gte", "lte"
    level: AlertLevel
    message: str


class AlertManager:
    """Manages alert rules and notifications."""
    
    def __init__(self):
        self.rules: list[AlertRule] = []
        self.handlers: list[Callable] = []
        self.active_alerts: Dict[str, datetime] = {}
        
    def add_rule(self, rule: AlertRule):
        """Add an alert rule."""
        self.rules.append(rule)
        
    def add_handler(self, handler: Callable):
        """Add an alert handler (callback)."""
        self.handlers.append(handler)
        
    def check_metrics(self, metrics: Any):
        """Check metrics against all rules."""
        for rule in self.rules:
            value = getattr(metrics, rule.metric, None)
            if value is None:
                continue
                
            # Check threshold
            triggered = self._evaluate(rule, value)
            
            if triggered:
                self._trigger_alert(rule, value)
                
    def _evaluate(self, rule: AlertRule, value: float) -> bool:
        """Evaluate if threshold is met."""
        ops = {
            'gt': lambda v, t: v > t,
            'lt': lambda v, t: v < t,
            'eq': lambda v, t: v == t,
            'gte': lambda v, t: v >= t,
            'lte': lambda v, t: v <= t,
        }
        return ops[rule.operator](value, rule.threshold)
        
    def _trigger_alert(self, rule: AlertRule, value: float):
        """Trigger an alert."""
        # Check if alert already active
        if rule.name in self.active_alerts:
            return  # Already alerted
            
        alert_msg = rule.message.format(value=value, threshold=rule.threshold)
        
        # Log alert
        log_level = {
            AlertLevel.INFO: logging.INFO,
            AlertLevel.WARNING: logging.WARNING,
            AlertLevel.ERROR: logging.ERROR,
            AlertLevel.CRITICAL: logging.CRITICAL,
        }[rule.level]
        
        logger.log(log_level, f"[ALERT] {alert_msg}")
        
        # Call handlers
        for handler in self.handlers:
            try:
                handler(rule.level, alert_msg)
            except Exception as e:
                logger.error(f"Alert handler error: {e}")
                
        # Mark as active
        self.active_alerts[rule.name] = datetime.now()
        
    def clear_alert(self, rule_name: str):
        """Clear an active alert."""
        if rule_name in self.active_alerts:
            del self.active_alerts[rule_name]
            logger.info(f"Alert cleared: {rule_name}")


# Default alert rules
ALERT_RULES = [
    AlertRule(
        name="high_response_time",
        metric="response_time_ms",
        threshold=100,
        operator="gt",
        level=AlertLevel.WARNING,
        message="High response time: {value:.2f}ms (threshold: {threshold}ms)"
    ),
    AlertRule(
        name="high_memory",
        metric="memory_mb",
        threshold=500,
        operator="gt",
        level=AlertLevel.WARNING,
        message="High memory usage: {value:.2f}MB (threshold: {threshold}MB)"
    ),
    AlertRule(
        name="high_cpu",
        metric="cpu_percent",
        threshold=80,
        operator="gt",
        level=AlertLevel.WARNING,
        message="High CPU usage: {value:.1f}% (threshold: {threshold}%)"
    ),
    AlertRule(
        name="error_rate",
        metric="error_count",
        threshold=10,
        operator="gt",
        level=AlertLevel.ERROR,
        message="High error rate: {value} errors"
    ),
]


alert_manager = AlertManager()
for rule in ALERT_RULES:
    alert_manager.add_rule(rule)
```

### 7.5 –î–∞—à–±–æ—Ä–¥ (–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)

–î–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –º–µ—Ç—Ä–∏–∫ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- **Streamlit** ‚Äî –±—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–æ–≤
- **Flask + Chart.js** ‚Äî –∫–∞—Å—Ç–æ–º–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```python
# scripts/metrics_dashboard.py
"""Simple metrics dashboard using Streamlit."""

import streamlit as st
import time
import psutil
import sys
import os

sys.path.insert(0, os.path.join(os.path.dirname(__file__), '..', 'src'))

from src.utils.metrics import metrics_collector

st.set_page_config(page_title="UART Control Metrics", layout="wide")

st.title("üìä UART Control - Performance Dashboard")

# Sidebar with controls
st.sidebar.header("Settings")
refresh_rate = st.sidebar.slider("Refresh rate (seconds)", 1, 10, 2)

# Placeholder for metrics
metrics_placeholder = st.empty()

# CPU and Memory
col1, col2 = st.columns(2)

with col1:
    st.subheader("üíª CPU Usage")
    cpu_chart = st.empty()
    
with col2:
    st.subheader("üß† Memory Usage")
    mem_chart = st.empty()

# Response time
st.subheader("‚è±Ô∏è Response Time")
response_chart = st.empty()

# Auto-refresh
while True:
    # Get current metrics
    metrics = metrics_collector.get_current_metrics()
    metrics._rx_count = 0  # Would come from actual app
    metrics._tx_count = 0
    
    with metrics_placeholder.container():
        # Display key metrics
        m1, m2, m3, m4 = st.columns(4)
        m1.metric("Response Time", f"{metrics.response_time_ms:.2f} ms")
        m2.metric("Throughput", f"{metrics.throughput:.2f}/s")
        m3.metric("Errors", metrics.error_count)
        m4.metric("Uptime", f"{time.time() - metrics_collector._start_time:.0f}s")
        
    # Update charts
    cpu_chart.line_chart([metrics.cpu_percent])
    mem_chart.line_chart([metrics.memory_mb])
    response_chart.line_chart([metrics.response_time_ms])
    
    time.sleep(refresh_rate)
```

### 7.6 –ó–∞–ø—É—Å–∫ –¥–∞—à–±–æ—Ä–¥–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ streamlit
pip install streamlit

# –ó–∞–ø—É—Å–∫ –¥–∞—à–±–æ—Ä–¥–∞
streamlit run scripts/metrics_dashboard.py
```

---

## 8. –ì—Ä–∞—Ñ–∏–∫ –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –§–∞–∑–∞ 1: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2-3 –Ω–µ–¥–µ–ª–∏)

1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è Model —Å–ª–æ—è
3. –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è ViewModel —Å–ª–æ—è
4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞ (coverage)

### –§–∞–∑–∞ 2: CI/CD (1-2 –Ω–µ–¥–µ–ª–∏)

1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Actions
2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ CI/CD

### –§–∞–∑–∞ 3: –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (1-2 –Ω–µ–¥–µ–ª–∏)

1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤—â–∏–∫–∞ –≤ –∫–æ–¥
2. –í—ã—è–≤–ª–µ–Ω–∏–µ —É–∑–∫–∏—Ö –º–µ—Å—Ç
3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —É—á–∞—Å—Ç–∫–æ–≤
4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—é

### –§–∞–∑–∞ 4: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (1 –Ω–µ–¥–µ–ª—è)

1. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ FileHandler –∏ —Ä–æ—Ç–∞—Ü–∏–∏
3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º
4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –§–∞–∑–∞ 5: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (2-3 –Ω–µ–¥–µ–ª–∏)

1. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫
2. –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∞–ª–µ—Ä—Ç–∏–Ω–≥–∞
3. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –¥–∞—à–±–æ—Ä–¥–∞
4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

---

## 9. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```txt
# requirements-dev.txt
# Testing
pytest>=7.0.0
pytest-qt>=4.0.0
pytest-mock>=3.10.0
pytest-cov>=4.0.0
pytest-xdist>=3.0.0

# Linting
flake8>=5.0.0
pylint>=2.17.0
mypy>=1.0.0
black>=23.0.0

# Profiling
memory_profiler>=0.61.0
line_profiler>=4.1.0

# Monitoring
psutil>=5.9.0
streamlit>=1.24.0

# CI/CD
actions/checkout@v4
actions/setup-python@v5
codecov/codecov-action@v3
```

---

## 10. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–∞–Ω–Ω—ã–π –ø–ª–∞–Ω –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞:

1. **Unit-—Ç–µ—Å—Ç—ã** ‚Äî –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ Model –∏ ViewModel —Å–ª–æ—ë–≤
2. **CI/CD** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Å–±–æ—Ä–∫–∞
3. **–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –≤—ã—è–≤–ª–µ–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —É–∑–∫–∏—Ö –º–µ—Å—Ç
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–æ—Ç–∞—Ü–∏–µ–π
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** ‚Äî —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫, –¥–∞—à–±–æ—Ä–¥ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥

–ö–∞–∂–¥–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–ª–µ–¥–æ–≤–∞—Ç—å —É–∫–∞–∑–∞–Ω–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.

---

## 11. –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ó–∞–¥–∞—á–∏ (2026-02-16)

### –í–Ω–µ–¥—Ä–µ–Ω–∏–µ Unit-–¢–µ—Å—Ç–æ–≤

#### –°–æ–∑–¥–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤:
```
tests/
‚îú‚îÄ‚îÄ conftest.py                    # –§–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è Qt-—Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ pytest.ini                     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ test_serial_worker.py      # –¢–µ—Å—Ç—ã SerialWorker (20 —Ç–µ—Å—Ç–æ–≤)
‚îÇ   ‚îî‚îÄ‚îÄ test_config_loader.py      # –¢–µ—Å—Ç—ã ConfigLoader (25 —Ç–µ—Å—Ç–æ–≤)
‚îú‚îÄ‚îÄ viewmodels/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ test_main_viewmodel.py     # –¢–µ—Å—Ç—ã MainViewModel (45 —Ç–µ—Å—Ç–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ test_com_port_viewmodel.py # –¢–µ—Å—Ç—ã ComPortViewModel (15 —Ç–µ—Å—Ç–æ–≤)
‚îÇ   ‚îî‚îÄ‚îÄ test_command_history_viewmodel.py # –¢–µ—Å—Ç—ã CommandHistoryViewModel (17 —Ç–µ—Å—Ç–æ–≤)
‚îî‚îÄ‚îÄ utils/
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îú‚îÄ‚îÄ test_port_manager.py       # –¢–µ—Å—Ç—ã PortManager (25 —Ç–µ—Å—Ç–æ–≤)
    ‚îú‚îÄ‚îÄ test_theme_manager.py      # –¢–µ—Å—Ç—ã ThemeManager (20 —Ç–µ—Å—Ç–æ–≤)
    ‚îî‚îÄ‚îÄ test_state_utils.py        # –¢–µ—Å—Ç—ã StateUtils (30 —Ç–µ—Å—Ç–æ–≤)
```

#### –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏:

1. **SerialWorker (src/models/serial_worker.py)**
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞ configure()
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞ configure_from_dict()
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞ write()
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ (charset, is_connected, etc.)
   - ‚úÖ –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏: –ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ, –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤—ã–∑–æ–≤–æ–≤ stop()

2. **ConfigLoader (src/utils/config_loader.py)**
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ get_colors() –¥–ª—è —Ç–µ–º dark/light
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ get_button_colors()
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ get_fonts(), get_sizes()
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ get_serial_timing(), get_console_config()
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ _parse_int_value() —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏
   - ‚úÖ –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏: –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ–º—ã, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

3. **MainViewModel (src/viewmodels/main_viewmodel.py)**
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ format_rx(), format_tx(), format_system()
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ cache_log_line(), clear_cache()
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ filter_cache() —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ strip_html()
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–æ–≤ (increment_rx, increment_tx, etc.)
   - ‚úÖ –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏: –ø—É—Å—Ç—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –¥–ª–∏–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, —é–Ω–∏–∫–æ–¥

4. **ComPortViewModel (src/viewmodels/com_port_viewmodel.py)**
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ –ø–æ—Ä—Ç–∞
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ set_port_name(), set_baud_rate()
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–æ–≤

5. **CommandHistoryViewModel (src/viewmodels/command_history_viewmodel.py)**
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ CommandHistoryEntry
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ —Ñ–∞–π–ª

6. **PortManager (src/utils/port_manager.py)**
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–Ω–≥–ª—Ç–æ–Ω–∞
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ acquire()/release()
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ is_in_use()
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ get_active_ports()
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ thread-safety

7. **ThemeManager (src/utils/theme_manager.py)**
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ set_theme()
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ _get_effective_theme()
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ is_dark_theme(), is_light_theme()
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–º–µ–Ω—ã —Ç–µ–º

8. **StateUtils (src/utils/state_utils.py)**
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ PortConnectionState enum
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ normalize_state()
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ is_terminal_state()
   - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ is_active_state()

#### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤:** ~197
- **–ü—Ä–æ–≤–∞–ª–µ–Ω–æ:** 1 (Windows permission error - –Ω–µ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ—Å—Ç–∞–º–∏)
- **–ü—Ä–æ–ø—É—â–µ–Ω–æ:** 1 (–∏–∑-–∑–∞ Windows permission error)
